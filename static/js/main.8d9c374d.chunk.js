(this.webpackJsonpswd=this.webpackJsonpswd||[]).push([[0],{28:function(e,t,a){e.exports=a.p+"static/media/logo.faa1ee06.png"},29:function(e,t,a){e.exports=a(44)},34:function(e,t,a){},39:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(16),c=a.n(o),l=(a(34),a(18)),i=a(6),s=(a(39),a(3)),u=a(10),m=a(11);var d=function(e){var t=r.a.useState("loading"),a=Object(s.a)(t,2),n=a[0],o=a[1],c=r.a.useState({img:!1,load:!0,error:!1}),l=Object(s.a)(c,2),i=l[0],d=l[1],p=r.a.useState(0),f=Object(s.a)(p,2),g=f[0],v=f[1];return r.a.useEffect((function(){var t;return t=setInterval((function(){v((function(e){return e+1})),n?null===e.imagesrc?d({img:!1,load:!1,error:!0}):d({img:!0,load:!1,error:!1}):d(g>3?{img:!1,load:!1,error:!0}:{img:!1,load:!0,error:!1})}),1e3),function(){return clearInterval(t)}}),[g,n,e.imagesrc]),r.a.createElement("div",{className:"card"},r.a.createElement("h1",null,e.name),r.a.createElement("div",{className:"cardWrapper"},i.img&&r.a.createElement("img",{alt:e.name,onLoad:function(){o(!0)},onError:function(){o(!1)},src:e.imagesrc}),r.a.createElement("div",null,i.load&&r.a.createElement(u.a,{icon:m.e,spin:!0,size:"lg",style:{color:e.loadColor}}),i.error&&r.a.createElement(u.a,{icon:m.c,style:{color:"red"},size:"6x"}))))};var p=function(e){return r.a.createElement("div",{className:"button",onClick:e.handleClick.bind(this)},e.text)},f=a(13);var g=Object(i.b)((function(e){return{displayedSet:e.displayedSet,itemLimit:e.itemLimit,setLimit:e.setLimit,sorted:e.sorted,name:e.name}}),(function(e){return{changeLimit:function(){e({type:"INCREASE_LIMIT"})}}}))((function(e){var t,a=r.a.useState([]),n=Object(s.a)(a,2),o=n[0],c=n[1],l=r.a.useState(!0),i=Object(s.a)(l,2),u=i[0],m=i[1],g=r.a.useState(!1),v=Object(s.a)(g,2),h=v[0],E=v[1];function y(){var t=o,a=function(a){e.sorted[a].toggle&&(t=e.sorted.points.toggle?t.filter((function(t){return t.points.includes(e.sorted[a].val)&&null!=t.points})):t.filter((function(t){return t[a]===e.sorted[a].val})))};for(var n in e.sorted)a(n);return""!==e.name&&(t=t.filter((function(t){return!!t.name.includes(e.name)||(!!t.name.toLowerCase().includes(e.name)||!!t.name.toUpperCase().includes(e.name))}))),t}return r.a.useEffect((function(){fetch("https://swdestinydb.com/api/public/cards/").then((function(e){return e.json()})).then((function(e){m(!1),c(e)})).catch((function(){E(!0)}))}),[o,u]),0!==y().length?t=y().slice(0,e.itemLimit).map((function(e,t){return r.a.createElement(f.b,{to:"/"+e.code,key:t},r.a.createElement(d,{name:e.name,imagesrc:e.imagesrc,code:e.code,loadColor:"#343740"}))})):u||h?u&&!h?t=r.a.createElement("h1",null,"Fetching Cards..."):u&&h&&(t=r.a.createElement("h1",null,"Loading Cards failed. Refresh page...")):t=r.a.createElement("h1",null,"No cards in search"),r.a.createElement("div",{className:"list"},r.a.createElement("div",{className:"wrapper"},t),function(){if(e.itemLimit<y().length&&y().length>10)return r.a.createElement(p,{handleClick:function(){return e.changeLimit()},text:"Load More"})}())}));var v=function(e){var t,a,n=r.a.useState([{format:"trilogy",restricted:!1,balance:"--",legal:!1},{format:"standard",restricted:!1,balance:"--",legal:!1},{format:"infinite",restricted:!1,balance:"--",legal:!0}]),o=Object(s.a)(n,2),c=o[0],l=o[1],i=r.a.useState(!1),u=Object(s.a)(i,2);u[0],u[1],void 0!==e.crd.subtypes&&(t=e.crd.subtypes.map((function(t,a){return r.a.createElement("h3",{key:a},t.name,a!==e.crd.subtypes.length-1&&"-")}))),void 0!==e.crd.sides&&(a=e.crd.sides.map((function(e,t){return r.a.createElement("div",{key:t,className:"side"},e)}))),r.a.useEffect((function(){var t=new AbortController,a=t.signal;var n=function(){fetch("https://swdestinydb.com/api/public/formats/",{signal:a}).then((function(e){return e.json()})).then((function(t){var a=[];t.map((function(t){var n={name:t.name,restricted:!1,balance:"--",legal:!1};e.code in t.data.balance&&(n.balance=t.data.balance[e.code]),t.data.restricted.includes(e.code)&&(n.restricted=!0),t.data.sets.includes(e.crd.set_code)&&(n.legal=!0),a.push(n)})),l(a)})).catch((function(){return console.log()}))};return n(),function(){n(),t.abort()}}),[]);var m=c.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("h1",null,e.name),r.a.createElement("h3",null,e.restricted?"Restricted":null),r.a.createElement("h3",null,e.balance),r.a.createElement("h6",null,"Legal: ",e.legal?"Playable":"Unplayable"))}));return r.a.createElement("div",{className:"cardInfo"},r.a.createElement("h1",null,e.crd.is_unique&&"\u25c6 ",e.crd.name),r.a.createElement("h2",null,e.crd.health&&"Health:",e.crd.health),r.a.createElement("h2",null,e.crd.cost&&"Cost:",e.crd.cost),r.a.createElement("h2",null,e.crd.points&&"Points:",e.crd.points),r.a.createElement("h2",null,e.crd.type_name),r.a.createElement("div",{className:"subtypes"},t),r.a.createElement("div",{className:"sides"},a),r.a.createElement("h3",null,e.crd.has_errata&&"This card has an errata"),m,r.a.createElement("p",null,e.crd.text),r.a.createElement("i",null,e.crd.flavor),r.a.createElement("div",null,e.crd.affiliation_name),r.a.createElement("div",null,e.crd.rarity_name),r.a.createElement("div",null,e.crd.set_name,": ",e.crd.position))};var h=function(e){var t=r.a.useState(""),a=Object(s.a)(t,2),n=a[0],o=a[1];r.a.useEffect((function(){var t=new AbortController,a=t.signal;var n=function(){fetch("https://swdestinydb.com/api/public/cards/",{signal:a}).then((function(e){return e.json()})).then((function(t){var a,n=t.filter((function(t){return e.match.params.id===t.code}));a=n[0],o(a)})).catch((function(e){return console.log()}))};return n(),function(){n(),t.abort()}}),[e.match.params.id]);var c=n.code;return r.a.createElement(f.b,{className:e.match.params.id?"cardPageWrapper":void 0,to:"/"},r.a.createElement(d,{name:n.name,imagesrc:n.imagesrc,code:n.code,loadColor:"white"}),c&&r.a.createElement(v,{crd:n,code:c}))};var E=Object(i.b)((function(e){return{displayedSet:e.displayedSet,itemLimit:e.itemLimit,setLimit:e.setLimit,sorted:e.sorted}}),(function(e){return{setName:function(t){e(function(e){return{type:"SET_NAME",name:e}}(t))}}}))((function(e){var t=r.a.useState(""),a=Object(s.a)(t,2),n=a[0],o=a[1];return r.a.createElement("input",{placeholder:"Search for a Card by Name...",onChange:function(t){o(t.target.value),e.setName(n)},className:"search"})})),y=a(28),b=a.n(y);var O=Object(i.b)((function(e){return{options:e.options}}),(function(e){return{toggleOptions:function(){e({type:"TOGGLE_OPTIONS"})},clearOptions:function(){e({type:"CLEAR_OPTIONS"})}}}))((function(e){return r.a.createElement("nav",null,r.a.createElement("div",{className:"logo",onClick:function(){return e.clearOptions()}},r.a.createElement("img",{alt:"logo",src:b.a})),r.a.createElement(E,null),r.a.createElement("div",{className:"ham",onClick:function(){return e.toggleOptions()}},!e.options&&r.a.createElement(u.a,{icon:m.d,size:"2x"}),e.options&&r.a.createElement(u.a,{icon:m.f,size:"2x"})))}));var S=Object(i.b)((function(e){return{sorted:e.sorted}}),(function(e){return{setSort:function(t,a,n){e(function(e,t,a){return{type:"SET_SORT",prop:e,toggle:t,val:a}}(t,a,n))}}}))((function(e){var t,a=function(t,a){e.setSort(t,function(t,a){return!(e.sorted[t].toggle&&e.sorted[t].val===a)}(t,a),a)};return e.sorted[e.type].val===e.value&&e.sorted[e.type].toggle&&(t={backgroundColor:"#343740"}),r.a.createElement("div",{className:"item",style:t,onClick:function(){return a(e.type,e.value)}},isNaN(e.value)?e.value.charAt(0).toUpperCase()+e.value.substring(1):e.value)}));var N=function(e){var t,a=r.a.useState(!1),n=Object(s.a)(a,2),o=n[0],c=n[1];t=o?{minHeight:25*e.opt.values.length+"px",maxHeight:25*e.opt.values.length+"px"}:{minHeight:"0px",maxHeight:"0px"};var l=e.opt.values.map((function(t,a){return r.a.createElement(S,{key:a,type:e.opt.type,value:t})}));return r.a.createElement("div",{className:"option"},r.a.createElement("h3",{className:"optHead",onClick:function(){return c(!o)}},e.opt.name,!o&&r.a.createElement(u.a,{icon:m.a}),o&&r.a.createElement(u.a,{icon:m.b})),r.a.createElement("div",{className:"listOpt",style:t},l))};var _=[{name:"Affiliations",type:"affiliation_code",values:["hero","villain","neutral"]},{name:"Colors",type:"faction_code",values:["red","blue","yellow","gray"]},{name:"Rarity",type:"rarity_name",values:["Starter","Common","Uncommon","Rare","Legendary"]},{name:"Health",type:"health",values:[4,5,6,7,8,9,10,11,12,13,15]},{name:"Cost",type:"cost",values:[0,1,2,3,4,5,6]},{name:"Set",type:"set_name",values:function(){var e=[];return fetch("https://swdestinydb.com/api/public/sets/").then((function(e){return e.json()})).then((function(t){return t.map((function(t){return e.push(t.name)})),e})).catch((function(){console.log("error loading sets")})),e}()},{name:"Points",type:"points",values:["4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28"]},{name:"Type",type:"type_code",values:["character","upgrade","support","event","downgrade","plot"]}];var j=Object(i.b)((function(e){return{options:e.options}}),(function(e){return{clearOptions:function(){e({type:"CLEAR_OPTIONS"})}}}))((function(e){var t;t=e.options?{right:"0"}:{right:"-100%"};var a=_.map((function(e,t){return r.a.createElement(N,{key:t,opt:e})}));return r.a.createElement("div",{className:"options",style:t},r.a.createElement("h1",null,"Sort Cards"),r.a.createElement("div",{className:"wrapper"},a),r.a.createElement(p,{handleClick:function(){return e.clearOptions()},text:"Clear Search Query"}))})),C=a(12);var L=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(O,null),r.a.createElement(j,null),r.a.createElement("div",{className:"mainWrapper"},r.a.createElement(C.c,null,r.a.createElement(C.a,{path:"/",component:g})),r.a.createElement(C.a,{path:"/:id",component:h})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var w=a(24);function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(a,!0).forEach((function(t){Object(w.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var T={itemLimit:10,sorted:{rarity_name:{toggle:!1,val:"Starter"},affiliation_code:{toggle:!1,val:"villain"},type_code:{toggle:!1,val:"character"},faction_code:{toggle:!1,val:"red"},set_name:{toggle:!1,val:"Way of the Force"},health:{toggle:!1,val:10},cost:{toggle:!1,val:0},points:{toggle:!1,val:"7"}},name:"",options:!1},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;if("INCREASE_LIMIT"===t.type){var a=e.itemLimit;return P({},e,{itemLimit:a+=10})}return"SET_SORT"===t.type?P({},e,{itemLimit:10,sorted:P({},e.sorted,Object(w.a)({},t.prop,{toggle:t.toggle,val:t.val}))}):"SET_NAME"===t.type?P({},e,{name:t.name}):"TOGGLE_OPTIONS"===t.type?P({},e,{options:!e.options}):"CLEAR_OPTIONS"===t.type?P({},e,{itemLimit:10,sorted:{rarity_name:{toggle:!1,val:"Starter"},affiliation_code:{toggle:!1,val:"villain"},type_code:{toggle:!1,val:"character"},faction_code:{toggle:!1,val:"red"},set_name:{toggle:!1,val:"Way of the Force"},health:{toggle:!1,val:10},cost:{toggle:!1,val:0},points:{toggle:!1,val:"7"}},name:"",options:!1}):e},I=Object(l.b)(x);c.a.render(r.a.createElement(i.a,{store:I},r.a.createElement(f.a,{basename:"/star-wars-destiny-database"},r.a.createElement(L,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[29,1,2]]]);
//# sourceMappingURL=main.8d9c374d.chunk.js.map