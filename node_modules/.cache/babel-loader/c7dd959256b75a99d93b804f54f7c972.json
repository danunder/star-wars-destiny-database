{"ast":null,"code":"import _slicedToArray from\"/Users/LMJ62894/WebstormProjects/star-wars-destiny-database/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faSpinner,faExclamationCircle,faHeart}from'@fortawesome/free-solid-svg-icons';import Side from'./Side';function CardInfo(props){var _React$useState=React.useState([{format:\"trilogy\",restricted:false,balance:\"--\",legal:false},{format:\"standard\",restricted:false,balance:\"--\",legal:false},{format:\"infinite\",restricted:false,balance:\"--\",legal:true}]),_React$useState2=_slicedToArray(_React$useState,2),rst=_React$useState2[0],setRst=_React$useState2[1];var _React$useState3=React.useState({rst:false,load:true,error:false}),_React$useState4=_slicedToArray(_React$useState3,2),rend=_React$useState4[0],rendElement=_React$useState4[1];React.useEffect(function(){var abortController=new AbortController();var signal=abortController.signal;function handleStatusChange(status){setRst(status);}var unsubscribe=function unsubscribe(){fetch(\"https://swdestinydb.com/api/public/formats/\",{signal:signal}).then(function(response){return response.json();}).then(function(data){var formats=[];data.map(function(fm){var format={name:fm.name,restricted:false,balance:\"--\",legal:false};if(props.code in fm.data.balance){format.balance=fm.data.balance[props.code];}if(fm.data.restricted.includes(props.code)){format.restricted=true;}if(fm.data.sets.includes(props.crd.set_code)){format.legal=true;}rendElement({rst:true,load:false,error:false});return formats.push(format);});handleStatusChange(formats);}).catch(function(){return rendElement({rst:false,load:false,error:true});});};unsubscribe();return function cleanup(){abortController.abort();};},[props.code,props.crd.set_code]);var formats=rst.map(function(fm,idx){return React.createElement(\"div\",{key:idx,className:\"format\"},React.createElement(\"h3\",null,fm.name),React.createElement(\"h3\",null,fm.restricted?\"Restricted\":null),React.createElement(\"h3\",null,fm.balance),React.createElement(\"h6\",null,\"Legal: \",fm.legal?\"Playable\":\"Unplayable\"));});return React.createElement(\"div\",{className:\"cardInfo\"},React.createElement(\"h1\",null,props.crd.is_unique&&\"â—† \",props.crd.name),props.crd.health&&React.createElement(\"h2\",null,React.createElement(FontAwesomeIcon,{icon:faHeart,size:\"lg\",style:{color:\"red\"}}),\" \",props.crd.health),props.crd.cost&&React.createElement(\"h2\",{className:\"cost\"},\" \",React.createElement(\"span\",{className:\"icon icon-resource \"}),\" \",props.crd.cost,\" \"),React.createElement(\"h2\",null,props.crd.points&&\"Points:\",props.crd.points),React.createElement(\"h2\",null,props.crd.type_name),React.createElement(\"div\",{className:\"subtypes\"},props.crd.subtypes!==undefined&&props.crd.subtypes.map(function(sb,idx){return React.createElement(\"h3\",{key:idx},sb.name,idx!==props.crd.subtypes.length-1&&\"-\");})),React.createElement(\"div\",{className:\"sides\"},props.crd.sides!==undefined&&props.crd.sides.map(function(sd,idx){return React.createElement(Side,{key:idx,sd:sd});})),React.createElement(\"h3\",null,props.crd.has_errata&&\"This card has an errata\"),React.createElement(\"div\",{className:\"formats\"},rend.rst&&formats),React.createElement(\"div\",null,rend.load&&React.createElement(FontAwesomeIcon,{icon:faSpinner,spin:true,size:\"lg\",style:{color:props.loadColor}}),rend.error&&React.createElement(FontAwesomeIcon,{icon:faExclamationCircle,style:{color:\"red\"},size:\"6x\"})),React.createElement(\"div\",{className:\"text\"},props.crd.text!==null&&React.createElement(\"p\",{dangerouslySetInnerHTML:{__html:props.crd.text.replace(\"[special]\",\"<span class='icon\"+\" icon-special '></span>\")}}),React.createElement(\"i\",null,props.crd.flavor!==null&&props.crd.flavor.replace(\"<cite>\",\"-\").replace(\"</cite>\",\"\")),React.createElement(\"div\",{className:\"bottom\"},React.createElement(\"div\",{className:\"affl \"+props.crd.affiliation_name},props.crd.affiliation_name),React.createElement(\"div\",{className:\"rr \"+props.crd.rarity_name},props.crd.rarity_name),React.createElement(\"div\",null,props.crd.set_name,\": \",props.crd.position))));}export default CardInfo;","map":{"version":3,"sources":["/Users/LMJ62894/WebstormProjects/star-wars-destiny-database/src/components/card/CardInfo.js"],"names":["React","FontAwesomeIcon","faSpinner","faExclamationCircle","faHeart","Side","CardInfo","props","useState","format","restricted","balance","legal","rst","setRst","load","error","rend","rendElement","useEffect","abortController","AbortController","signal","handleStatusChange","status","unsubscribe","fetch","then","response","json","data","formats","map","fm","name","code","includes","sets","crd","set_code","push","catch","cleanup","abort","idx","is_unique","health","color","cost","points","type_name","subtypes","undefined","sb","length","sides","sd","has_errata","loadColor","text","__html","replace","flavor","affiliation_name","rarity_name","set_name","position"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport {faSpinner, faExclamationCircle, faHeart} from '@fortawesome/free-solid-svg-icons';\nimport Side from './Side';\n\n\nfunction CardInfo(props) {\n\n    const [rst, setRst] = React.useState([\n\n        {\n            format: \"trilogy\",\n            restricted: false,\n            balance: \"--\",\n            legal: false\n        },\n        {\n            format: \"standard\",\n            restricted: false,\n            balance: \"--\",\n            legal: false\n        },\n        {\n            format: \"infinite\",\n            restricted: false,\n            balance: \"--\",\n            legal: true\n        }\n    ]);\n\n    const [rend, rendElement] = React.useState({\n        rst: false,\n        load: true,\n        error: false\n    });\n\n\n    React.useEffect(() => {\n\n        const abortController = new AbortController();\n        const signal = abortController.signal;\n\n\n        function handleStatusChange(status) {\n            setRst(status);\n        }\n\n        const unsubscribe = () => {\n\n            fetch(\"https://swdestinydb.com/api/public/formats/\", {signal: signal})\n                .then(response => {\n                    return response.json();\n                })\n                .then((data) => {\n                    let formats = [];\n\n                    data.map((fm) => {\n\n                        let format = {\n                            name: fm.name,\n                            restricted: false,\n                            balance: \"--\",\n                            legal: false\n                        };\n\n                        if (props.code in fm.data.balance) {\n                            format.balance = fm.data.balance[props.code];\n                        }\n\n                        if (fm.data.restricted.includes(props.code)) {\n                            format.restricted = true;\n                        }\n\n                        if (fm.data.sets.includes(props.crd.set_code)) {\n                            format.legal = true;\n                        }\n\n                        rendElement({rst: true, load: false, error: false});\n\n\n                        return formats.push(format);\n\n                    });\n\n                    handleStatusChange(formats);\n                }).catch(() => rendElement({rst: false, load: false, error: true}))\n        };\n\n        unsubscribe();\n\n\n        return function cleanup() {\n            abortController.abort();\n        };\n    }, [props.code, props.crd.set_code]);\n\n    let formats = rst.map((fm, idx) =>\n        <div key={idx} className={\"format\"}>\n            <h3>{fm.name}</h3>\n            <h3>{fm.restricted ? \"Restricted\" : null}</h3>\n            <h3>{fm.balance}</h3>\n            <h6>Legal: {fm.legal ? \"Playable\" : \"Unplayable\"}</h6>\n        </div>\n    );\n\n\n    return (\n        <div className={\"cardInfo\"}>\n            <h1>{props.crd.is_unique && \"â—† \"}{props.crd.name}</h1>\n            {props.crd.health && <h2><FontAwesomeIcon icon={faHeart} size={\"lg\"} style={{color: \"red\"}} /> {props.crd.health}</h2>}\n            {props.crd.cost && <h2 className={\"cost\"}> <span className='icon icon-resource '></span> {props.crd.cost} </h2>}\n            <h2>{props.crd.points && \"Points:\"}{props.crd.points}</h2>\n            <h2>{props.crd.type_name}</h2>\n            <div className={\"subtypes\"}>{props.crd.subtypes !== undefined && props.crd.subtypes.map((sb, idx) =>\n                <h3 key={idx}>{sb.name}{idx !== (props.crd.subtypes.length - 1) && \"-\"}</h3>\n            )}</div>\n            <div className={\"sides\"}>{props.crd.sides !== undefined && props.crd.sides.map((sd, idx) =>\n                <Side key={idx} sd={sd}/>\n            )}</div>\n            <h3>{props.crd.has_errata && \"This card has an errata\"}</h3>\n            <div className={\"formats\"}>\n                {rend.rst && formats}\n            </div>\n            <div>\n                {rend.load && <FontAwesomeIcon icon={faSpinner} spin size={\"lg\"} style={{color: props.loadColor}}/>}\n                {rend.error && <FontAwesomeIcon icon={faExclamationCircle} style={{color: \"red\"}} size={\"6x\"}/>}\n            </div>\n            <div className={\"text\"}>\n                {props.crd.text!==null&&<p dangerouslySetInnerHTML={{__html: props.crd.text.replace(\"[special]\", \"<span class='icon\" +\n                        \" icon-special '></span>\")}}></p>}\n\n                <i>{props.crd.flavor!==null&& props.crd.flavor.replace(\"<cite>\", \"-\").replace(\"</cite>\", \"\")}</i>\n\n                <div className={\"bottom\"}>\n                    <div className={\"affl \"+props.crd.affiliation_name}>{props.crd.affiliation_name}</div>\n\n                    <div className={\"rr \"+props.crd.rarity_name}>{props.crd.rarity_name}</div>\n\n                    <div>{props.crd.set_name}: {props.crd.position}</div>\n                </div>\n\n\n            </div>\n\n\n        </div>\n    )\n}\n\nexport default CardInfo"]},"metadata":{},"sourceType":"module"}