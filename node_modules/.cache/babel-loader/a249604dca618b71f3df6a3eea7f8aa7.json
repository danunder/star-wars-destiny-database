{"ast":null,"code":"import _slicedToArray from \"/Users/LMJ62894/WebstormProjects/star-wars-destiny-database/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/LMJ62894/WebstormProjects/star-wars-destiny-database/src/components/card/CardPage.js\";\nimport React from 'react';\nimport { useHistory, useParams } from \"react-router-dom\";\n\nfunction CardPage() {\n  const _React$useState = React.useState(\"\"),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        card = _React$useState2[0],\n        setCard = _React$useState2[1];\n\n  const _React$useState3 = React.useState(\"loading\"),\n        _React$useState4 = _slicedToArray(_React$useState3, 2),\n        load = _React$useState4[0],\n        updateLoading = _React$useState4[1];\n\n  let history = useHistory();\n\n  let back = e => {\n    e.stopPropagation();\n    history.goBack();\n  };\n\n  const handleImageLoad = () => {\n    updateLoading(\"loaded\");\n  };\n\n  const handleImageError = () => {\n    updateLoading(\"error\");\n  };\n\n  let loadDisplay = () => {\n    if (load === \"loading\") {\n      return \"Loading Image...\";\n    } else if (load === \"error\") {\n      return \"Image Error\";\n    } else {\n      return \"\";\n    }\n  };\n\n  let _useParams = useParams(),\n      id = _useParams.id;\n\n  React.useEffect(() => {\n    function handleStatusChange(status) {\n      setCard(status);\n    }\n\n    const unsubscribe = () => {\n      fetch(\"https://swdestinydb.com/api/public/cards/\").then(response => {\n        return response.json();\n      }).then(data => {\n        let cardMain = data.filter(crd => {\n          return id === crd.code;\n        });\n        handleStatusChange(cardMain[0]);\n      });\n    };\n\n    unsubscribe();\n    return () => unsubscribe();\n  }, [id]);\n  return React.createElement(\"div\", {\n    className: id ? \"cardPageWrapper\" : undefined,\n    onClick: back,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, card.name), React.createElement(\"img\", {\n    alt: \"card\" + card.name,\n    onLoad: handleImageLoad,\n    onError: handleImageError,\n    src: card.imagesrc,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, loadDisplay));\n}\n\nexport default CardPage;","map":{"version":3,"sources":["/Users/LMJ62894/WebstormProjects/star-wars-destiny-database/src/components/card/CardPage.js"],"names":["React","useHistory","useParams","CardPage","useState","card","setCard","load","updateLoading","history","back","e","stopPropagation","goBack","handleImageLoad","handleImageError","loadDisplay","id","useEffect","handleStatusChange","status","unsubscribe","fetch","then","response","json","data","cardMain","filter","crd","code","undefined","name","imagesrc"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,UAAR,EACIC,SADJ,QAEO,kBAFP;;AAIA,SAASC,QAAT,GAAmB;AAAA,0BAEQH,KAAK,CAACI,QAAN,CAAe,EAAf,CAFR;AAAA;AAAA,QAERC,IAFQ;AAAA,QAEHC,OAFG;;AAAA,2BAGeN,KAAK,CAACI,QAAN,CAAe,SAAf,CAHf;AAAA;AAAA,QAGRG,IAHQ;AAAA,QAGFC,aAHE;;AAKf,MAAIC,OAAO,GAAGR,UAAU,EAAxB;;AAEA,MAAIS,IAAI,GAAGC,CAAC,IAAI;AACZA,IAAAA,CAAC,CAACC,eAAF;AACAH,IAAAA,OAAO,CAACI,MAAR;AACH,GAHD;;AAKA,QAAMC,eAAe,GAAG,MAAI;AACxBN,IAAAA,aAAa,CAAC,QAAD,CAAb;AACH,GAFD;;AAIA,QAAMO,gBAAgB,GAAG,MAAI;AACzBP,IAAAA,aAAa,CAAC,OAAD,CAAb;AACH,GAFD;;AAIA,MAAIQ,WAAW,GAAE,MAAI;AACjB,QAAGT,IAAI,KAAG,SAAV,EAAoB;AAChB,aAAO,kBAAP;AACH,KAFD,MAEM,IAAGA,IAAI,KAAG,OAAV,EAAkB;AACpB,aAAO,aAAP;AACH,KAFK,MAED;AACD,aAAO,EAAP;AACH;AACJ,GARD;;AApBe,mBA8BFL,SAAS,EA9BP;AAAA,MA8BTe,EA9BS,cA8BTA,EA9BS;;AAgCfjB,EAAAA,KAAK,CAACkB,SAAN,CAAgB,MAAI;AAGhB,aAASC,kBAAT,CAA4BC,MAA5B,EAAoC;AAChCd,MAAAA,OAAO,CAACc,MAAD,CAAP;AACH;;AAED,UAAMC,WAAW,GAAG,MAAI;AAGpBC,MAAAA,KAAK,CAAC,2CAAD,CAAL,CACKC,IADL,CACUC,QAAQ,IAAI;AACd,eAAOA,QAAQ,CAACC,IAAT,EAAP;AACH,OAHL,EAIKF,IAJL,CAIWG,IAAD,IAAU;AAEZ,YAAIC,QAAQ,GAAGD,IAAI,CAACE,MAAL,CAAYC,GAAG,IAAE;AAC5B,iBAAOZ,EAAE,KAAGY,GAAG,CAACC,IAAhB;AACH,SAFc,CAAf;AAIAX,QAAAA,kBAAkB,CAACQ,QAAQ,CAAC,CAAD,CAAT,CAAlB;AACH,OAXL;AAYH,KAfD;;AAiBAN,IAAAA,WAAW;AAGX,WAAO,MAAIA,WAAW,EAAtB;AACH,GA5BD,EA4BE,CAACJ,EAAD,CA5BF;AA8BA,SACI;AAAK,IAAA,SAAS,EAAEA,EAAE,GAAG,iBAAH,GAAuBc,SAAzC;AAAoD,IAAA,OAAO,EAAErB,IAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKL,IAAI,CAAC2B,IAAV,CADJ,EAEI;AAAK,IAAA,GAAG,EAAE,SAAO3B,IAAI,CAAC2B,IAAtB;AAA4B,IAAA,MAAM,EAAElB,eAApC;AAAqD,IAAA,OAAO,EAAEC,gBAA9D;AAAgF,IAAA,GAAG,EAAEV,IAAI,CAAC4B,QAA1F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,EAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAMjB,WAAN,CAHJ,CADJ;AAOH;;AAED,eAAeb,QAAf","sourcesContent":["import React from 'react';\nimport {useHistory,\n    useParams\n} from \"react-router-dom\";\n\nfunction CardPage(){\n\n    const [card,setCard] = React.useState(\"\");\n    const [load, updateLoading] = React.useState(\"loading\");\n\n    let history = useHistory();\n\n    let back = e => {\n        e.stopPropagation();\n        history.goBack();\n    };\n\n    const handleImageLoad = ()=>{\n        updateLoading(\"loaded\")\n    };\n\n    const handleImageError = ()=>{\n        updateLoading(\"error\")\n    };\n\n    let loadDisplay =()=>{\n        if(load===\"loading\"){\n            return \"Loading Image...\"\n        }else if(load===\"error\"){\n            return \"Image Error\";\n        }else{\n            return \"\"\n        }\n    };\n\n    let { id } = useParams();\n\n    React.useEffect(()=>{\n\n\n        function handleStatusChange(status) {\n            setCard(status)\n        }\n\n        const unsubscribe = ()=>{\n\n\n            fetch(\"https://swdestinydb.com/api/public/cards/\")\n                .then(response => {\n                    return response.json();\n                })\n                .then((data) => {\n\n                    let cardMain = data.filter(crd=>{\n                        return id===crd.code;\n                    });\n\n                    handleStatusChange(cardMain[0]);\n                })\n        };\n\n        unsubscribe();\n\n\n        return ()=>unsubscribe();\n    },[id]);\n\n    return (\n        <div className={id ? \"cardPageWrapper\" : undefined} onClick={back}>\n            <h1>{card.name}</h1>\n            <img alt={\"card\"+card.name} onLoad={handleImageLoad} onError={handleImageError} src={card.imagesrc}/>\n            <div>{loadDisplay}</div>\n        </div>\n    )\n}\n\nexport default CardPage;"]},"metadata":{},"sourceType":"module"}