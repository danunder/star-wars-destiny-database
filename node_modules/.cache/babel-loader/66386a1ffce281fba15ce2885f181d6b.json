{"ast":null,"code":"import _slicedToArray from\"/Users/LMJ62894/WebstormProjects/star-wars-destiny-database/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{changeLimit as _changeLimit}from\"../../redux/actions/setActions\";import Card from'../card/Card';import{connect}from'react-redux';import Button from'../input/Button';function List(props){var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),cards=_React$useState2[0],setCards=_React$useState2[1];var _React$useState3=React.useState(true),_React$useState4=_slicedToArray(_React$useState3,2),load=_React$useState4[0],setLoad=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),error=_React$useState6[0],setError=_React$useState6[1];React.useEffect(function(){function handleStatusChange(status){setCards(status);}fetch(\"https://swdestinydb.com/api/public/cards/\").then(function(response){return response.json();}).then(function(data){setLoad(false);handleStatusChange(data);}).catch(function(){setError(true);});},[cards,load]);function sortObject(){var sortedList=cards;var _loop=function _loop(p){if(props.sorted[p].toggle){if(props.sorted.points.toggle){sortedList=sortedList.filter(function(crd){console.log(crd,props.sorted[p].val);if(crd.points!=null){return crd.points.includes(props.sorted[p].val);}else{return;}});}else{sortedList=sortedList.filter(function(crd){return crd[p]===props.sorted[p].val;});}}};for(var p in props.sorted){_loop(p);}if(props.name!==''){sortedList=sortedList.filter(function(crd){if(crd.name.includes(props.name)){return true;}else if(crd.name.toLowerCase().includes(props.name)){return true;}else if(crd.name.toUpperCase().includes(props.name)){return true;}else{return false;}});}return sortedList;}var cardEle;if(sortObject().length!==0){cardEle=sortObject().slice(0,props.itemLimit).map(function(crd,idx){return React.createElement(Card,{key:idx,name:crd.name,imagesrc:crd.imagesrc,code:crd.code,loadColor:\"#343740\"});});}else if(!load&&!error){cardEle=React.createElement(\"h1\",null,\"No cards in search\");}else if(load&&!error){cardEle=React.createElement(\"h1\",null,\"Fetching Cards...\");}else if(load&&error){cardEle=React.createElement(\"h1\",null,\"Loading Cards failed. Refresh page...\");}var button=function button(){if(props.itemLimit<sortObject().length&&sortObject().length>10){return React.createElement(Button,{handleClick:function handleClick(){return props.changeLimit();},text:\"Load More\"});}};return React.createElement(\"div\",{className:\"list\"},React.createElement(\"div\",{className:\"wrapper\"},cardEle),button());}var mapStateToProps=function mapStateToProps(state){return{displayedSet:state.displayedSet,itemLimit:state.itemLimit,setLimit:state.setLimit,sorted:state.sorted,name:state.name};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{changeLimit:function changeLimit(){dispatch(_changeLimit());}};};export default connect(mapStateToProps,mapDispatchToProps)(List);","map":{"version":3,"sources":["/Users/LMJ62894/WebstormProjects/star-wars-destiny-database/src/components/main/List.js"],"names":["React","changeLimit","Card","connect","Button","List","props","useState","cards","setCards","load","setLoad","error","setError","useEffect","handleStatusChange","status","fetch","then","response","json","data","catch","sortObject","sortedList","p","sorted","toggle","points","filter","crd","console","log","val","includes","name","toLowerCase","toUpperCase","cardEle","length","slice","itemLimit","map","idx","imagesrc","code","button","mapStateToProps","state","displayedSet","setLimit","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {changeLimit} from \"../../redux/actions/setActions\";\nimport Card from '../card/Card';\nimport {connect} from 'react-redux';\nimport Button from '../input/Button';\n\nfunction List(props) {\n\n    const [cards, setCards] = React.useState([]);\n    const [load, setLoad] = React.useState(true);\n    const [error, setError] = React.useState(false);\n\n    React.useEffect(() => {\n\n        function handleStatusChange(status) {\n            setCards(status)\n        }\n\n        fetch(\"https://swdestinydb.com/api/public/cards/\")\n            .then(response => {\n                return response.json();\n            })\n            .then((data) => {\n                setLoad(false);\n                handleStatusChange(data);\n            }).catch(function () {\n                setError(true);\n            })\n\n    }, [cards, load]);\n\n\n    function sortObject() {\n\n        let sortedList = cards;\n\n        for (let p in props.sorted) {\n            if (props.sorted[p].toggle) {\n\n                if (props.sorted.points.toggle) {\n                    sortedList = sortedList.filter(crd => {\n                        console.log(crd, props.sorted[p].val);\n\n                        if (crd.points != null) {\n                            return crd.points.includes(props.sorted[p].val)\n                        } else {\n                            return;\n                        }\n                    });\n\n                } else {\n                    sortedList = sortedList.filter(crd => {\n\n                        return crd[p] === props.sorted[p].val\n\n                    });\n                }\n\n\n            }\n        }\n\n\n        if (props.name !== '') {\n            sortedList = sortedList.filter(crd => {\n                if (crd.name.includes(props.name)) {\n                    return true\n                } else if (crd.name.toLowerCase().includes(props.name)) {\n                    return true\n                } else if (crd.name.toUpperCase().includes(props.name)) {\n                    return true\n                } else {\n                    return false\n                }\n            });\n        }\n\n\n        return sortedList\n    }\n\n    let cardEle;\n\n    if (sortObject().length !== 0) {\n        cardEle = sortObject().slice(0, props.itemLimit).map((crd, idx) =>\n\n\n            <Card key={idx} name={crd.name} imagesrc={crd.imagesrc} code={crd.code} loadColor={\"#343740\"}/>\n        );\n    } else if(!load&&!error) {\n        cardEle = <h1>No cards in search</h1>;\n    }else if(load&&!error){\n        cardEle = <h1>Fetching Cards...</h1>;\n    }else if(load&&error){\n        cardEle = <h1>Loading Cards failed. Refresh page...</h1>;\n    }\n\n\n    const button = () => {\n        if (props.itemLimit < sortObject().length && sortObject().length > 10) {\n            return <Button handleClick={() => props.changeLimit()} text={\"Load More\"}/>\n        }\n    };\n\n\n    return (\n\n        <div className={\"list\"}>\n            <div className={\"wrapper\"}>\n                {cardEle}\n            </div>\n            {button()}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        displayedSet: state.displayedSet,\n        itemLimit: state.itemLimit,\n        setLimit: state.setLimit,\n        sorted: state.sorted,\n        name: state.name\n    }\n};\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        changeLimit: () => {\n            dispatch(changeLimit())\n        }\n    }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(List);\n"]},"metadata":{},"sourceType":"module"}