{"ast":null,"code":"import _slicedToArray from \"/Users/LMJ62894/WebstormProjects/star-wars-destiny-database/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/LMJ62894/WebstormProjects/star-wars-destiny-database/src/components/card/CardPage.js\";\nimport React from 'react';\nimport { Link } from \"react-router-dom\";\nimport Card from './Card';\nimport CardInfo from './CardInfo';\nimport { useLocation } from \"react-router-dom\";\n\nfunction CardPage(props) {\n  const _React$useState = React.useState(\"\"),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        card = _React$useState2[0],\n        setCard = _React$useState2[1];\n\n  let location = useLocation();\n  React.useEffect(() => {\n    const abortController = new AbortController();\n    const signal = abortController.signal;\n\n    function handleStatusChange(status) {\n      setCard(status);\n    }\n\n    const unsubscribe = () => {\n      fetch(\"https://swdestinydb.com/api/public/cards/\", {\n        signal: signal\n      }).then(response => {\n        return response.json();\n      }).then(data => {\n        let cardMain = data.filter(crd => {\n          return props.match.params.id === crd.code;\n        });\n        handleStatusChange(cardMain[0]);\n      }).catch(ex => console.log());\n    };\n\n    unsubscribe();\n    return function cleanup() {\n      unsubscribe();\n      abortController.abort();\n    };\n  }, [props.match.params.id]);\n  const code = card.code;\n\n  if (location.pathname !== \"/\") {\n    document.body.querySelector(\".mainWrapper\").removeEventListener('DOMMouseScroll', false);\n  } else {\n    document.body.querySelector(\".mainWrapper\").addEventListener('DOMMouseScroll', false);\n  }\n\n  return React.createElement(Link, {\n    className: props.match.params.id ? \"cardPageWrapper\" : undefined,\n    to: \"/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, React.createElement(Card, {\n    name: card.name,\n    imagesrc: card.imagesrc,\n    code: card.code,\n    loadColor: \"white\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }), code && React.createElement(CardInfo, {\n    crd: card,\n    code: code,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }));\n}\n\nexport default CardPage;","map":{"version":3,"sources":["/Users/LMJ62894/WebstormProjects/star-wars-destiny-database/src/components/card/CardPage.js"],"names":["React","Link","Card","CardInfo","useLocation","CardPage","props","useState","card","setCard","location","useEffect","abortController","AbortController","signal","handleStatusChange","status","unsubscribe","fetch","then","response","json","data","cardMain","filter","crd","match","params","id","code","catch","ex","console","log","cleanup","abort","pathname","document","body","querySelector","removeEventListener","addEventListener","undefined","name","imagesrc"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SACKC,IADL,QAEO,kBAFP;AAGA,OAAOC,IAAP,MAAiB,QAAjB;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,SACIC,WADJ,QAEO,kBAFP;;AAIA,SAASC,QAAT,CAAkBC,KAAlB,EAAwB;AAAA,0BAEGN,KAAK,CAACO,QAAN,CAAe,EAAf,CAFH;AAAA;AAAA,QAEbC,IAFa;AAAA,QAERC,OAFQ;;AAIpB,MAAIC,QAAQ,GAAGN,WAAW,EAA1B;AAGAJ,EAAAA,KAAK,CAACW,SAAN,CAAgB,MAAI;AAEhB,UAAMC,eAAe,GAAG,IAAIC,eAAJ,EAAxB;AACA,UAAMC,MAAM,GAAGF,eAAe,CAACE,MAA/B;;AAGA,aAASC,kBAAT,CAA4BC,MAA5B,EAAoC;AAChCP,MAAAA,OAAO,CAACO,MAAD,CAAP;AACH;;AAED,UAAMC,WAAW,GAAG,MAAI;AAGpBC,MAAAA,KAAK,CAAC,2CAAD,EAA8C;AAACJ,QAAAA,MAAM,EAACA;AAAR,OAA9C,CAAL,CACKK,IADL,CACUC,QAAQ,IAAI;AACd,eAAOA,QAAQ,CAACC,IAAT,EAAP;AACH,OAHL,EAIKF,IAJL,CAIWG,IAAD,IAAU;AAEZ,YAAIC,QAAQ,GAAGD,IAAI,CAACE,MAAL,CAAYC,GAAG,IAAE;AAC5B,iBAAOnB,KAAK,CAACoB,KAAN,CAAYC,MAAZ,CAAmBC,EAAnB,KAAwBH,GAAG,CAACI,IAAnC;AACH,SAFc,CAAf;AAIAd,QAAAA,kBAAkB,CAACQ,QAAQ,CAAC,CAAD,CAAT,CAAlB;AACH,OAXL,EAWOO,KAXP,CAWaC,EAAE,IAAGC,OAAO,CAACC,GAAR,EAXlB;AAYH,KAfD;;AAiBAhB,IAAAA,WAAW;AAGX,WAAO,SAASiB,OAAT,GAAkB;AACrBjB,MAAAA,WAAW;AACXL,MAAAA,eAAe,CAACuB,KAAhB;AACH,KAHD;AAKH,GAnCD,EAmCE,CAAC7B,KAAK,CAACoB,KAAN,CAAYC,MAAZ,CAAmBC,EAApB,CAnCF;AAqCA,QAAMC,IAAI,GAAGrB,IAAI,CAACqB,IAAlB;;AAEA,MAAInB,QAAQ,CAAC0B,QAAT,KAAoB,GAAxB,EAA6B;AACzBC,IAAAA,QAAQ,CAACC,IAAT,CAAcC,aAAd,CAA4B,cAA5B,EAA4CC,mBAA5C,CAAgE,gBAAhE,EAAmF,KAAnF;AAEH,GAHD,MAGO;AACHH,IAAAA,QAAQ,CAACC,IAAT,CAAcC,aAAd,CAA4B,cAA5B,EAA4CE,gBAA5C,CAA6D,gBAA7D,EAAgF,KAAhF;AAEH;;AAED,SACI,oBAAC,IAAD;AAAM,IAAA,SAAS,EAAEnC,KAAK,CAACoB,KAAN,CAAYC,MAAZ,CAAmBC,EAAnB,GAAwB,iBAAxB,GAA4Cc,SAA7D;AAAwE,IAAA,EAAE,EAAE,GAA5E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEI,oBAAC,IAAD;AAAO,IAAA,IAAI,EAAElC,IAAI,CAACmC,IAAlB;AAAwB,IAAA,QAAQ,EAAEnC,IAAI,CAACoC,QAAvC;AAAiD,IAAA,IAAI,EAAEpC,IAAI,CAACqB,IAA5D;AAAkE,IAAA,SAAS,EAAE,OAA7E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,EAGKA,IAAI,IAAE,oBAAC,QAAD;AAAU,IAAA,GAAG,EAAErB,IAAf;AAAqB,IAAA,IAAI,EAAEqB,IAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHX,CADJ;AAQH;;AAED,eAAexB,QAAf","sourcesContent":["import React from 'react';\nimport {\n     Link\n} from \"react-router-dom\";\nimport Card from './Card';\nimport CardInfo from './CardInfo';\nimport {\n    useLocation\n} from \"react-router-dom\";\n\nfunction CardPage(props){\n\n    const [card,setCard] = React.useState(\"\");\n\n    let location = useLocation();\n\n\n    React.useEffect(()=>{\n\n        const abortController = new AbortController();\n        const signal  =abortController.signal;\n\n\n        function handleStatusChange(status) {\n            setCard(status)\n        }\n\n        const unsubscribe = ()=>{\n\n\n            fetch(\"https://swdestinydb.com/api/public/cards/\", {signal:signal})\n                .then(response => {\n                    return response.json();\n                })\n                .then((data) => {\n\n                    let cardMain = data.filter(crd=>{\n                        return props.match.params.id===crd.code;\n                    });\n\n                    handleStatusChange(cardMain[0]);\n                }).catch(ex=> console.log())\n        };\n\n        unsubscribe();\n\n\n        return function cleanup(){\n            unsubscribe();\n            abortController.abort();\n        };\n\n    },[props.match.params.id]);\n\n    const code = card.code;\n\n    if (location.pathname!==\"/\") {\n        document.body.querySelector(\".mainWrapper\").removeEventListener('DOMMouseScroll',  false);\n\n    } else {\n        document.body.querySelector(\".mainWrapper\").addEventListener('DOMMouseScroll',  false);\n\n    }\n\n    return (\n        <Link className={props.match.params.id ? \"cardPageWrapper\" : undefined} to={\"/\"}>\n            {/*<div className={\"mw\"}>*/}\n            <Card  name={card.name} imagesrc={card.imagesrc} code={card.code} loadColor={\"white\"}/>\n            {code&&<CardInfo crd={card} code={code}/>}\n            {/*</div>*/}\n        </Link>\n    )\n}\n\nexport default CardPage;"]},"metadata":{},"sourceType":"module"}