{"ast":null,"code":"import _slicedToArray from\"/Users/LMJ62894/WebstormProjects/star-wars-destiny-database/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{Link}from\"react-router-dom\";import Card from'./Card';import CardInfo from'./CardInfo';function CardPage(props){var _React$useState=React.useState(\"\"),_React$useState2=_slicedToArray(_React$useState,2),card=_React$useState2[0],setCard=_React$useState2[1];React.useEffect(function(){var abortController=new AbortController();var signal=abortController.signal;function handleStatusChange(status){setCard(status);}var unsubscribe=function unsubscribe(){fetch(\"https://swdestinydb.com/api/public/cards/\",{signal:signal}).then(function(response){return response.json();}).then(function(data){var cardMain=data.filter(function(crd){return props.match.params.id===crd.code;});handleStatusChange(cardMain[0]);}).catch(function(ex){return console.log();});};unsubscribe();return function cleanup(){unsubscribe();abortController.abort();};},[props.match.params.id]);var code=card.code;return React.createElement(Link,{className:props.match.params.id?\"cardPageWrapper\":undefined,to:\"/\"},React.createElement(Card,{name:card.name,imagesrc:card.imagesrc,code:card.code,loadColor:\"white\"}),code&&React.createElement(CardInfo,{crd:card,code:code}));}export default CardPage;","map":{"version":3,"sources":["/Users/LMJ62894/WebstormProjects/star-wars-destiny-database/src/components/card/CardPage.js"],"names":["React","Link","Card","CardInfo","CardPage","props","useState","card","setCard","useEffect","abortController","AbortController","signal","handleStatusChange","status","unsubscribe","fetch","then","response","json","data","cardMain","filter","crd","match","params","id","code","catch","ex","console","log","cleanup","abort","undefined","name","imagesrc"],"mappings":"8IAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OACKC,IADL,KAEO,kBAFP,CAGA,MAAOC,CAAAA,IAAP,KAAiB,QAAjB,CACA,MAAOC,CAAAA,QAAP,KAAqB,YAArB,CAGA,QAASC,CAAAA,QAAT,CAAkBC,KAAlB,CAAwB,qBAEGL,KAAK,CAACM,QAAN,CAAe,EAAf,CAFH,oDAEbC,IAFa,qBAERC,OAFQ,qBAOpBR,KAAK,CAACS,SAAN,CAAgB,UAAI,CAEhB,GAAMC,CAAAA,eAAe,CAAG,GAAIC,CAAAA,eAAJ,EAAxB,CACA,GAAMC,CAAAA,MAAM,CAAGF,eAAe,CAACE,MAA/B,CAGA,QAASC,CAAAA,kBAAT,CAA4BC,MAA5B,CAAoC,CAChCN,OAAO,CAACM,MAAD,CAAP,CACH,CAED,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAI,CAGpBC,KAAK,CAAC,2CAAD,CAA8C,CAACJ,MAAM,CAACA,MAAR,CAA9C,CAAL,CACKK,IADL,CACU,SAAAC,QAAQ,CAAI,CACd,MAAOA,CAAAA,QAAQ,CAACC,IAAT,EAAP,CACH,CAHL,EAIKF,IAJL,CAIU,SAACG,IAAD,CAAU,CAEZ,GAAIC,CAAAA,QAAQ,CAAGD,IAAI,CAACE,MAAL,CAAY,SAAAC,GAAG,CAAE,CAC5B,MAAOlB,CAAAA,KAAK,CAACmB,KAAN,CAAYC,MAAZ,CAAmBC,EAAnB,GAAwBH,GAAG,CAACI,IAAnC,CACH,CAFc,CAAf,CAIAd,kBAAkB,CAACQ,QAAQ,CAAC,CAAD,CAAT,CAAlB,CACH,CAXL,EAWOO,KAXP,CAWa,SAAAC,EAAE,QAAGC,CAAAA,OAAO,CAACC,GAAR,EAAH,EAXf,EAYH,CAfD,CAiBAhB,WAAW,GAGX,MAAO,SAASiB,CAAAA,OAAT,EAAkB,CACrBjB,WAAW,GACXL,eAAe,CAACuB,KAAhB,GACH,CAHD,CAKH,CAnCD,CAmCE,CAAC5B,KAAK,CAACmB,KAAN,CAAYC,MAAZ,CAAmBC,EAApB,CAnCF,EAqCA,GAAMC,CAAAA,IAAI,CAAGpB,IAAI,CAACoB,IAAlB,CAGA,MACI,qBAAC,IAAD,EAAM,SAAS,CAAEtB,KAAK,CAACmB,KAAN,CAAYC,MAAZ,CAAmBC,EAAnB,CAAwB,iBAAxB,CAA4CQ,SAA7D,CAAwE,EAAE,CAAE,GAA5E,EAEI,oBAAC,IAAD,EAAO,IAAI,CAAE3B,IAAI,CAAC4B,IAAlB,CAAwB,QAAQ,CAAE5B,IAAI,CAAC6B,QAAvC,CAAiD,IAAI,CAAE7B,IAAI,CAACoB,IAA5D,CAAkE,SAAS,CAAE,OAA7E,EAFJ,CAGKA,IAAI,EAAE,oBAAC,QAAD,EAAU,GAAG,CAAEpB,IAAf,CAAqB,IAAI,CAAEoB,IAA3B,EAHX,CADJ,CAQH,CAED,cAAevB,CAAAA,QAAf","sourcesContent":["import React from 'react';\nimport {\n     Link\n} from \"react-router-dom\";\nimport Card from './Card';\nimport CardInfo from './CardInfo';\n\n\nfunction CardPage(props){\n\n    const [card,setCard] = React.useState(\"\");\n\n\n\n\n    React.useEffect(()=>{\n\n        const abortController = new AbortController();\n        const signal  =abortController.signal;\n\n\n        function handleStatusChange(status) {\n            setCard(status)\n        }\n\n        const unsubscribe = ()=>{\n\n\n            fetch(\"https://swdestinydb.com/api/public/cards/\", {signal:signal})\n                .then(response => {\n                    return response.json();\n                })\n                .then((data) => {\n\n                    let cardMain = data.filter(crd=>{\n                        return props.match.params.id===crd.code;\n                    });\n\n                    handleStatusChange(cardMain[0]);\n                }).catch(ex=> console.log())\n        };\n\n        unsubscribe();\n\n\n        return function cleanup(){\n            unsubscribe();\n            abortController.abort();\n        };\n\n    },[props.match.params.id]);\n\n    const code = card.code;\n\n\n    return (\n        <Link className={props.match.params.id ? \"cardPageWrapper\" : undefined} to={\"/\"}>\n            {/*<div className={\"mw\"}>*/}\n            <Card  name={card.name} imagesrc={card.imagesrc} code={card.code} loadColor={\"white\"}/>\n            {code&&<CardInfo crd={card} code={code}/>}\n            {/*</div>*/}\n        </Link>\n    )\n}\n\nexport default CardPage;"]},"metadata":{},"sourceType":"module"}