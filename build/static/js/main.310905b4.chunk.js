(this.webpackJsonpswd=this.webpackJsonpswd||[]).push([[0],{28:function(e,a,n){e.exports=n.p+"static/media/logo.faa1ee06.png"},29:function(e,a,n){e.exports=n(44)},34:function(e,a,n){},39:function(e,a,n){},44:function(e,a,n){"use strict";n.r(a);var t=n(0),s=n.n(t),c=n(16),r=n.n(c),o=(n(34),n(18)),l=n(8),i=(n(39),n(3)),p=n(5),d=n(6);var u=function(e){var a=s.a.useState("loading"),n=Object(i.a)(a,2),t=n[0],c=n[1],r=s.a.useState({img:!1,load:!0,error:!1}),o=Object(i.a)(r,2),l=o[0],u=o[1],m=s.a.useState(0),f=Object(i.a)(m,2),g=f[0],v=f[1];return s.a.useEffect((function(){var a;return a=setInterval((function(){v((function(e){return e+1})),t?null===e.imagesrc?u({img:!1,load:!1,error:!0}):u({img:!0,load:!1,error:!1}):u(g>3?{img:!1,load:!1,error:!0}:{img:!1,load:!0,error:!1})}),1e3),function(){return clearInterval(a)}}),[g,t,e.imagesrc]),s.a.createElement("div",{className:"card"},s.a.createElement("h1",null,e.name),s.a.createElement("div",{className:"cardWrapper"},l.img&&s.a.createElement("img",{alt:e.name,onLoad:function(){c(!0)},onError:function(){c(!1)},src:e.imagesrc}),s.a.createElement("div",null,l.load&&s.a.createElement(p.a,{icon:d.f,spin:!0,size:"lg",style:{color:e.loadColor}}),l.error&&s.a.createElement(p.a,{icon:d.c,style:{color:"red"},size:"6x"}))))};var m=function(e){return s.a.createElement("div",{className:"button",onClick:e.handleClick.bind(this)},e.text)},f=n(13);var g=Object(l.b)((function(e){return{displayedSet:e.displayedSet,itemLimit:e.itemLimit,setLimit:e.setLimit,sorted:e.sorted,name:e.name}}),(function(e){return{changeLimit:function(){e({type:"INCREASE_LIMIT"})}}}))((function(e){var a,n=s.a.useState([]),t=Object(i.a)(n,2),c=t[0],r=t[1],o=s.a.useState(!0),l=Object(i.a)(o,2),p=l[0],d=l[1],g=s.a.useState(!1),v=Object(i.a)(g,2),h=v[0],E=v[1];function y(){var a=c,n=function(n){e.sorted[n].toggle&&(a=e.sorted.points.toggle?a.filter((function(a){return null!==a.points?a.points.split("/").includes(e.sorted[n].val):null})):a.filter((function(a){return a[n]===e.sorted[n].val})))};for(var t in e.sorted)n(t);return""!==e.name&&(a=a.filter((function(a){return!!a.name.includes(e.name)||(!!a.name.toLowerCase().includes(e.name)||!!a.name.toUpperCase().includes(e.name))}))),a}return s.a.useEffect((function(){fetch("https://swdestinydb.com/api/public/cards/").then((function(e){return e.json()})).then((function(e){d(!1),r(e)})).catch((function(){E(!0)}))}),[c,p]),0!==y().length?a=y().slice(0,e.itemLimit).map((function(e,a){return s.a.createElement(f.b,{to:"/"+e.code,key:a},s.a.createElement(u,{name:e.name,imagesrc:e.imagesrc,code:e.code,loadColor:"#343740"}))})):p||h?p&&!h?a=s.a.createElement("h1",null,"Fetching Cards..."):p&&h&&(a=s.a.createElement("h1",null,"Loading Cards failed. Refresh page...")):a=s.a.createElement("h1",null,"No cards in search"),s.a.createElement("div",{className:"list"},s.a.createElement("div",{className:"wrapper"},a),function(){if(e.itemLimit<y().length&&y().length>10)return s.a.createElement(m,{handleClick:function(){return e.changeLimit()},text:"Load More"})}())}));var v=function(e){var a;function n(){return e.sd.includes("+")?"+ "+e.sd[1]:e.sd.includes("Sp")?"":e.sd[0]}function t(){return!!e.sd.includes("+")}return a=e.sd.includes("RD")?t()?"<span class='sd modify'>"+n()+" <span class='icon icon-ranged '></span></span>":"<span class='sd'>"+n()+" <span class='icon icon-ranged '></span></span>":e.sd.includes("Sh")?t()?"<span class='sd modify'>"+n()+" <span class='icon icon-shield '></span></span>":"<span class='sd'>"+n()+" <span class='icon icon-shield '></span></span>":e.sd.includes("MD")?t()?"<span class='sd modify'>"+n()+" <span class='icon icon-melee '></span></span>":"<span class='sd'>"+n()+" <span class='icon icon-melee '></span></span>":e.sd.includes("ID")?t()?"<span class='sd modify'>"+n()+" <span class='icon icon-indirect '></span></span>":"<span class='sd'>"+n()+" <span class='icon icon-indirect '></span></span>":e.sd.includes("Dc")?t()?"<span class='sd modify'>"+n()+" <span class='icon icon-discard '></span></span>":"<span class='sd'>"+n()+" <span class='icon icon-discard '></span></span>":e.sd.includes("Dr")?t()?"<span class='sd modify'>"+n()+" <span class='icon icon-disrupt '></span></span>":"<span class='sd'>"+n()+" <span class='icon icon-disrupt '></span></span>":e.sd.includes("F")?t()?"<span class='sd modify'>"+n()+" <span class='icon icon-focus '></span></span>":"<span class='sd'>"+n()+" <span class='icon icon-focus '></span></span>":e.sd.includes("Sp")?"<span class='sd'>"+n()+" <span class='icon icon-special '></span></span>":e.sd.includes("R")?t()?"<span class='sd modify'>"+n()+" <span class='icon icon-resource '></span></span>":"<span class='sd'>"+n()+" <span class='icon icon-resource '></span></span>":"<span class='blank'>-</span>",isNaN(e.sd[e.sd.length-1])||"-"===e.sd[e.sd.length-1]||(a=t()?a+"<span class='res modify'> <span>"+e.sd[e.sd.length-1]+"</span> <span class='icon icon-resource'></span></span>":a+"<span class='res'> <span>"+e.sd[e.sd.length-1]+"</span> <span class='icon icon-resource'></span></span>"),s.a.createElement("div",{className:"side",dangerouslySetInnerHTML:{__html:a}})};var h=function(e){var a=s.a.useState([{format:"trilogy",restricted:!1,balance:"--",legal:!1},{format:"standard",restricted:!1,balance:"--",legal:!1},{format:"infinite",restricted:!1,balance:"--",legal:!0}]),n=Object(i.a)(a,2),t=n[0],c=n[1],r=s.a.useState({rst:!1,load:!0,error:!1}),o=Object(i.a)(r,2),l=o[0],u=o[1];s.a.useEffect((function(){var a=new AbortController,n=a.signal;return fetch("https://swdestinydb.com/api/public/formats/",{signal:n}).then((function(e){return e.json()})).then((function(a){var n=[];a.map((function(a){var t={name:a.name,restricted:!1,balance:"--",legal:!1};return e.code in a.data.balance&&(t.balance=a.data.balance[e.code]),a.data.restricted.includes(e.code)&&(t.restricted=!0),a.data.sets.includes(e.crd.set_code)&&(t.legal=!0),u({rst:!0,load:!1,error:!1}),n.push(t)})),c(n)})).catch((function(){return u({rst:!1,load:!1,error:!0})})),function(){a.abort()}}),[e.code,e.crd.set_code]);var m=t.map((function(e,a){return s.a.createElement("div",{key:a,className:"format"},s.a.createElement("h3",null,e.name),s.a.createElement("h3",null,e.restricted?"Restricted":null),s.a.createElement("h3",null,e.balance),s.a.createElement("h6",null,"Legal: ",e.legal?"Playable":"Unplayable"))}));return s.a.createElement("div",{className:"cardInfo"},s.a.createElement("h1",null,e.crd.is_unique&&"\u25c6 ",e.crd.name),e.crd.health&&s.a.createElement("h2",null,s.a.createElement(p.a,{icon:d.d,size:"lg",style:{color:"red"}})," ",e.crd.health),e.crd.cost&&s.a.createElement("h2",{className:"cost"}," ",s.a.createElement("span",{className:"icon icon-resource "})," ",e.crd.cost," "),s.a.createElement("h2",null,e.crd.points&&"Points:",e.crd.points),s.a.createElement("h2",null,e.crd.type_name),s.a.createElement("div",{className:"subtypes"},void 0!==e.crd.subtypes&&e.crd.subtypes.map((function(a,n){return s.a.createElement("h3",{key:n},a.name,n!==e.crd.subtypes.length-1&&"-")}))),s.a.createElement("div",{className:"sides"},void 0!==e.crd.sides&&e.crd.sides.map((function(e,a){return s.a.createElement(v,{key:a,sd:e})}))),s.a.createElement("h3",null,e.crd.has_errata&&"This card has an errata"),s.a.createElement("div",{className:"formats"},l.rst&&m),s.a.createElement("div",null,l.load&&s.a.createElement(p.a,{icon:d.f,spin:!0,size:"lg",style:{color:e.loadColor}}),l.error&&s.a.createElement(p.a,{icon:d.c,style:{color:"red"},size:"6x"})),s.a.createElement("div",{className:"text"},null!==e.crd.text&&s.a.createElement("p",{dangerouslySetInnerHTML:{__html:e.crd.text.replace("[special]","<span class='icon icon-special '></span>").replace("([special])","(<span class='icon icon-special '></span>)").replace("([indirect])","(<span class='icon icon-indirect '></span>)").replace("([melee])","(<span class='icon icon-melee '></span>)").replace("([ranged])","(<span class='icon icon-ranged '></span>)").replace("([discard])","(<span class='icon icon-discard '></span>)").replace("([focus])","(<span class='icon icon-focus '></span>)").replace("([disrupt])","(<span class='icon icon-disrupt '></span>)").replace("([shield])","(<span class='icon icon-shield '></span>)").replace("([resource])","(<span class='icon icon-resource '></span>)").replace("([blank])","(<span class='icon icon-blank '></span>)").replace("([ranged] or [melee])","(<span class='icon icon-ranged '></span> or <span class='icon icon-melee '></span>)").replace("([melee] or [ranged])","(<span class='icon icon-ranged '></span> or <span class='icon icon-melee '></span>)").replace("([ranged] or [melee])","(<span class='icon icon-ranged '></span> or <span class='icon icon-melee '></span>)").replace("([ranged], [melee] or [indirect])","(<span class='icon icon-ranged '></span>, <span class='icon icon-melee '></span> or <span class='icon icon-indirect '></span>)").replace("([ranged], [melee], or [indirect])","(<span class='icon icon-ranged '></span>, <span class='icon icon-melee '></span> or <span class='icon icon-indirect '></span>)")},className:"effects"}),s.a.createElement("i",null,null!==e.crd.flavor&&e.crd.flavor.replace("<cite>","-").replace("</cite>","")),s.a.createElement("div",{className:"bottom"},s.a.createElement("div",{className:"affl "+e.crd.affiliation_name},e.crd.affiliation_name),s.a.createElement("div",{className:"rr "+e.crd.rarity_name},e.crd.rarity_name),s.a.createElement("div",{className:"color",style:{backgroundColor:e.crd.faction_code,color:"black"}},e.crd.faction_code.toUpperCase()),s.a.createElement("div",null,e.crd.set_name,": ",e.crd.position))))};var E=function(e){var a=s.a.useState(""),n=Object(i.a)(a,2),t=n[0],c=n[1];s.a.useEffect((function(){var a=new AbortController,n=a.signal;var t=function(){fetch("https://swdestinydb.com/api/public/cards/",{signal:n}).then((function(e){return e.json()})).then((function(a){var n,t=a.filter((function(a){return e.match.params.id===a.code}));n=t[0],c(n)})).catch((function(e){return console.log()}))};return t(),function(){t(),a.abort()}}),[e.match.params.id]);var r=t.code;return s.a.createElement(f.b,{className:e.match.params.id?"cardPageWrapper":void 0,to:"/"},s.a.createElement(u,{name:t.name,imagesrc:t.imagesrc,code:t.code,loadColor:"white"}),r&&s.a.createElement(h,{crd:t,code:r}))};var y=Object(l.b)((function(e){return{displayedSet:e.displayedSet,itemLimit:e.itemLimit,setLimit:e.setLimit,sorted:e.sorted}}),(function(e){return{setName:function(a){e(function(e){return{type:"SET_NAME",name:e}}(a))}}}))((function(e){var a=s.a.useState(""),n=Object(i.a)(a,2),t=n[0],c=n[1];return s.a.createElement("input",{placeholder:"Search for a Card by Name...",onChange:function(a){c(a.target.value),e.setName(t)},className:"search"})})),b=n(28),O=n.n(b);var N=Object(l.b)((function(e){return{options:e.options}}),(function(e){return{toggleOptions:function(){e({type:"TOGGLE_OPTIONS"})},clearOptions:function(){e({type:"CLEAR_OPTIONS"})}}}))((function(e){return s.a.createElement("nav",null,s.a.createElement("div",{className:"logo",onClick:function(){return e.clearOptions()}},s.a.createElement("img",{alt:"logo",src:O.a})),s.a.createElement(y,null),s.a.createElement("div",{className:"ham",onClick:function(){return e.toggleOptions()}},!e.options&&s.a.createElement(p.a,{icon:d.e,size:"2x"}),e.options&&s.a.createElement(p.a,{icon:d.g,size:"2x"})))}));var S=Object(l.b)((function(e){return{sorted:e.sorted}}),(function(e){return{setSort:function(a,n,t){e(function(e,a,n){return{type:"SET_SORT",prop:e,toggle:a,val:n}}(a,n,t))}}}))((function(e){var a,n=function(a,n){e.setSort(a,function(a,n){return!(e.sorted[a].toggle&&e.sorted[a].val===n)}(a,n),n)};return e.sorted[e.type].val===e.value&&e.sorted[e.type].toggle&&(a={backgroundColor:"#343740"}),s.a.createElement("div",{className:"item",style:a,onClick:function(){return n(e.type,e.value)}},isNaN(e.value)?e.value.charAt(0).toUpperCase()+e.value.substring(1):e.value)}));var _=function(e){var a,n=s.a.useState(!1),t=Object(i.a)(n,2),c=t[0],r=t[1];a=c?{minHeight:25*e.opt.values.length+"px",maxHeight:25*e.opt.values.length+"px"}:{minHeight:"0px",maxHeight:"0px"};var o=e.opt.values.map((function(a,n){return s.a.createElement(S,{key:n,type:e.opt.type,value:a})}));return s.a.createElement("div",{className:"option"},s.a.createElement("h3",{className:"optHead",onClick:function(){return r(!c)}},e.opt.name,!c&&s.a.createElement(p.a,{icon:d.a}),c&&s.a.createElement(p.a,{icon:d.b})),s.a.createElement("div",{className:"listOpt",style:a},o))};var C=[{name:"Affiliations",type:"affiliation_code",values:["hero","villain","neutral"]},{name:"Colors",type:"faction_code",values:["red","blue","yellow","gray"]},{name:"Rarity",type:"rarity_name",values:["Starter","Common","Uncommon","Rare","Legendary"]},{name:"Health",type:"health",values:[4,5,6,7,8,9,10,11,12,13,14,15]},{name:"Cost",type:"cost",values:[0,1,2,3,4,5,6]},{name:"Set",type:"set_name",values:function(){var e=[];return fetch("https://swdestinydb.com/api/public/sets/").then((function(e){return e.json()})).then((function(a){return a.map((function(a){return e.push(a.name)})),e})).catch((function(){console.log("error loading sets")})),e}()},{name:"Points",type:"points",values:["4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28"]},{name:"Type",type:"type_code",values:["character","upgrade","support","event","downgrade","plot"]}];var j=Object(l.b)((function(e){return{options:e.options}}),(function(e){return{clearOptions:function(){e({type:"CLEAR_OPTIONS"})}}}))((function(e){var a;a=e.options?{right:"0"}:{right:"-100%"};var n=C.map((function(e,a){return s.a.createElement(_,{key:a,opt:e})}));return s.a.createElement("div",{className:"options",style:a},s.a.createElement("h1",null,"Sort Cards"),s.a.createElement("div",{className:"wrapper"},n),s.a.createElement(m,{handleClick:function(){return e.clearOptions()},text:"Clear Search Query"}))})),L=n(12);var w=function(){return s.a.createElement("div",{className:"App"},s.a.createElement(N,null),s.a.createElement(j,null),s.a.createElement("div",{className:"mainWrapper"},s.a.createElement(L.c,null,s.a.createElement(L.a,{path:"/",component:g}))),s.a.createElement(L.a,{path:"/:id",component:E}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var k=n(24);function T(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}function x(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?T(n,!0).forEach((function(a){Object(k.a)(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(n).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}var I={itemLimit:10,sorted:{rarity_name:{toggle:!1,val:"Starter"},affiliation_code:{toggle:!1,val:"villain"},type_code:{toggle:!1,val:"character"},faction_code:{toggle:!1,val:"red"},set_name:{toggle:!1,val:"Way of the Force"},health:{toggle:!1,val:10},cost:{toggle:!1,val:0},points:{toggle:!1,val:"7"}},name:"",options:!1},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,a=arguments.length>1?arguments[1]:void 0;if("INCREASE_LIMIT"===a.type){var n=e.itemLimit;return x({},e,{itemLimit:n+=10})}return"SET_SORT"===a.type?x({},e,{itemLimit:10,sorted:x({},e.sorted,Object(k.a)({},a.prop,{toggle:a.toggle,val:a.val}))}):"SET_NAME"===a.type?x({},e,{name:a.name}):"TOGGLE_OPTIONS"===a.type?x({},e,{options:!e.options}):"CLEAR_OPTIONS"===a.type?x({},e,{itemLimit:10,sorted:{rarity_name:{toggle:!1,val:"Starter"},affiliation_code:{toggle:!1,val:"villain"},type_code:{toggle:!1,val:"character"},faction_code:{toggle:!1,val:"red"},set_name:{toggle:!1,val:"Way of the Force"},health:{toggle:!1,val:10},cost:{toggle:!1,val:0},points:{toggle:!1,val:"7"}},name:"",options:!1}):e},R=Object(o.b)(P);r.a.render(s.a.createElement(l.a,{store:R},s.a.createElement(f.a,{basename:"/star-wars-destiny-database"},s.a.createElement(w,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[29,1,2]]]);
//# sourceMappingURL=main.310905b4.chunk.js.map